# æµ‹è¯•å’Œä¼˜åŒ–æŒ‡å—

## ğŸ“‹ æµ‹è¯•æ‰§è¡Œæµç¨‹

### 1. å•å…ƒæµ‹è¯•

è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•ï¼š
```javascript
wx.cloud.callFunction({
  name: 'test-runner',
  data: {
    testSuite: 'all'  // è¿è¡Œæ‰€æœ‰æµ‹è¯•
  }
}).then(res => {
  console.log('æµ‹è¯•ç»“æœ:', res.result.data);
});
```

è¿è¡Œç‰¹å®šæ¨¡å—æµ‹è¯•ï¼š
```javascript
// æµ‹è¯•è®¤è¯æ¨¡å—
wx.cloud.callFunction({
  name: 'test-runner',
  data: { testSuite: 'auth' }
});

// æµ‹è¯•æ´»åŠ¨æ¨¡å—
wx.cloud.callFunction({
  name: 'test-runner',
  data: { testSuite: 'activities' }
});

// æµ‹è¯•è®¢å•æ¨¡å—
wx.cloud.callFunction({
  name: 'test-runner',
  data: { testSuite: 'orders' }
});
```

### 2. æ€§èƒ½æµ‹è¯•

è¿è¡Œå®Œæ•´æ€§èƒ½æµ‹è¯•ï¼š
```javascript
wx.cloud.callFunction({
  name: 'performance-tester',
  data: {
    testType: 'all'
  }
}).then(res => {
  console.log('æ€§èƒ½æŠ¥å‘Š:', res.result.data.report);
});
```

è¿è¡Œç‰¹å®šç±»å‹æ€§èƒ½æµ‹è¯•ï¼š
```javascript
// æ•°æ®åº“æ€§èƒ½æµ‹è¯•
wx.cloud.callFunction({
  name: 'performance-tester',
  data: { testType: 'database' }
});

// äº‘å‡½æ•°æ€§èƒ½æµ‹è¯•
wx.cloud.callFunction({
  name: 'performance-tester',
  data: { testType: 'cloudfunction' }
});
```

## âœ… å·²å®ç°çš„æµ‹è¯•ç”¨ä¾‹

### è®¤è¯æ¨¡å—æµ‹è¯•
- âœ… ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½
- âœ… åœ°å€ç®¡ç†åŠŸèƒ½

### æ´»åŠ¨æ¨¡å—æµ‹è¯•
- âœ… åˆ›å»ºæ´»åŠ¨åŠŸèƒ½
- âœ… æ´»åŠ¨å¯†ç éªŒè¯ï¼ˆæ­£ç¡®å¯†ç ã€é”™è¯¯å¯†ç ï¼‰

### ç‰©å“æ¨¡å—æµ‹è¯•
- âœ… åˆ›å»ºç‰©å“åŠŸèƒ½
- âœ… åº“å­˜æ‰£å‡åŠŸèƒ½ï¼ˆæ•°é‡éªŒè¯ï¼‰

### è®¢å•æ¨¡å—æµ‹è¯•
- âœ… è®¢å•ä»·æ ¼è®¡ç®—ï¼ˆåŒ…è£…è´¹+è¿è´¹+æœåŠ¡è´¹5%ï¼‰
- âœ… æ¯äººé™é¢†2ä¸ªé€»è¾‘ï¼ˆè¶…å‡ºé™é¢éªŒè¯ï¼‰

### æ•°æ®ç»Ÿè®¡æ¨¡å—æµ‹è¯•
- âœ… ç”¨æˆ·ç»Ÿè®¡åŠŸèƒ½

### æ€§èƒ½æµ‹è¯•
- âœ… æ•°æ®åº“å•æ¡æŸ¥è¯¢æ€§èƒ½
- âœ… æ•°æ®åº“æ‰¹é‡æŸ¥è¯¢æ€§èƒ½
- âœ… æ•°æ®åº“èšåˆæŸ¥è¯¢æ€§èƒ½
- âœ… æ•°æ®åº“å¤æ‚æŸ¥è¯¢æ€§èƒ½
- âœ… æ•°æ®åº“äº‹åŠ¡å¤„ç†æ€§èƒ½
- âœ… äº‘å‡½æ•°ç®€å•è°ƒç”¨æ€§èƒ½
- âœ… äº‘å‡½æ•°æ•°æ®å¯†é›†å‹è°ƒç”¨æ€§èƒ½
- âœ… äº‘å­˜å‚¨è·å–é“¾æ¥æ€§èƒ½

## ğŸ¯ æ€§èƒ½åŸºå‡†

### æ•°æ®åº“æŸ¥è¯¢
- **ä¼˜ç§€ï¼ˆEXCELLENTï¼‰**:
  - å•æ¡æŸ¥è¯¢: < 100ms
  - æ‰¹é‡æŸ¥è¯¢(20æ¡): < 200ms
  - èšåˆæŸ¥è¯¢: < 150ms
  - å¤æ‚æŸ¥è¯¢: < 200ms
  - äº‹åŠ¡å¤„ç†: < 300ms

- **è‰¯å¥½ï¼ˆGOODï¼‰**:
  - å•æ¡æŸ¥è¯¢: 100-300ms
  - æ‰¹é‡æŸ¥è¯¢(20æ¡): 200-500ms
  - èšåˆæŸ¥è¯¢: 150-400ms
  - å¤æ‚æŸ¥è¯¢: 200-500ms
  - äº‹åŠ¡å¤„ç†: 300-600ms

- **éœ€æ”¹è¿›ï¼ˆNEEDS_IMPROVEMENTï¼‰**:
  - è¶…è¿‡ä¸Šè¿°è‰¯å¥½æ ‡å‡†çš„æ—¶é—´

### äº‘å‡½æ•°è°ƒç”¨
- **ä¼˜ç§€ï¼ˆEXCELLENTï¼‰**:
  - ç®€å•è°ƒç”¨: < 500ms
  - æ•°æ®å¯†é›†å‹: < 800ms

- **è‰¯å¥½ï¼ˆGOODï¼‰**:
  - ç®€å•è°ƒç”¨: 500-1000ms
  - æ•°æ®å¯†é›†å‹: 800-1500ms

- **éœ€æ”¹è¿›ï¼ˆNEEDS_IMPROVEMENTï¼‰**:
  - è¶…è¿‡ä¸Šè¿°è‰¯å¥½æ ‡å‡†çš„æ—¶é—´

### äº‘å­˜å‚¨æ“ä½œ
- **ä¼˜ç§€ï¼ˆEXCELLENTï¼‰**: < 300ms
- **è‰¯å¥½ï¼ˆGOODï¼‰**: 300-600ms
- **éœ€æ”¹è¿›ï¼ˆNEEDS_IMPROVEMENTï¼‰**: > 600ms

## ğŸš€ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### æ•°æ®åº“ä¼˜åŒ–

#### 1. ç´¢å¼•ä¼˜åŒ–
ç¡®ä¿ä»¥ä¸‹é›†åˆå·²æ·»åŠ ç´¢å¼•ï¼š
```javascript
// usersé›†åˆ
db.collection('users').createIndex({
  keys: { wechat_openid: 1 },
  unique: true
});

// activitiesé›†åˆ
db.collection('activities').createIndex({
  keys: { influencer_id: 1, status: 1 }
});

// itemsé›†åˆ
db.collection('items').createIndex({
  keys: { activity_id: 1, status: 1 }
});

// ordersé›†åˆ
db.collection('orders').createIndex({
  keys: { fan_wechat_openid: 1, activity_id: 1 }
});
db.collection('orders').createIndex({
  keys: { payment_status: 1, order_status: 1 }
});
```

#### 2. æŸ¥è¯¢ä¼˜åŒ–
- ä½¿ç”¨`.field()`é™åˆ¶è¿”å›å­—æ®µ
- é¿å…æŸ¥è¯¢è¿‡å¤šæ•°æ®ï¼Œåˆç†ä½¿ç”¨`.limit()`
- å¤æ‚æŸ¥è¯¢è€ƒè™‘åˆ†é¡µåŠ è½½
- ä½¿ç”¨`.count()`ä»£æ›¿è·å–å…¨éƒ¨æ•°æ®åè®¡æ•°

#### 3. æ•°æ®ç»“æ„ä¼˜åŒ–
- æ´»åŠ¨åˆ›å»ºæ—¶ä¿å­˜åœ°å€å¿«ç…§ï¼ˆå·²å®ç°ï¼‰
- è®¢å•åˆ›å»ºæ—¶ä¿å­˜ç‰©å“ä¿¡æ¯å¿«ç…§
- é¿å…è¿‡æ·±çš„åµŒå¥—ç»“æ„

### äº‘å‡½æ•°ä¼˜åŒ–

#### 1. å¹¶å‘æŸ¥è¯¢
ä½¿ç”¨`Promise.all()`å¹¶å‘æ‰§è¡Œç‹¬ç«‹æŸ¥è¯¢ï¼š
```javascript
// âŒ ä¸²è¡ŒæŸ¥è¯¢ï¼ˆæ…¢ï¼‰
const user = await db.collection('users').doc(userId).get();
const orders = await db.collection('orders').where({...}).get();
const items = await db.collection('items').where({...}).get();

// âœ… å¹¶å‘æŸ¥è¯¢ï¼ˆå¿«ï¼‰
const [user, orders, items] = await Promise.all([
  db.collection('users').doc(userId).get(),
  db.collection('orders').where({...}).get(),
  db.collection('items').where({...}).get()
]);
```

#### 2. å‡å°‘äº‘å‡½æ•°è°ƒç”¨
- åˆå¹¶ç›¸å…³æ“ä½œåˆ°ä¸€ä¸ªäº‘å‡½æ•°è°ƒç”¨
- ä½¿ç”¨æ‰¹é‡æ“ä½œä»£æ›¿å¤šæ¬¡å•ä¸ªæ“ä½œ
- å‰ç«¯ç¼“å­˜ä¸å¸¸å˜åŒ–çš„æ•°æ®

#### 3. å¼‚æ­¥å¤„ç†
- è€—æ—¶æ“ä½œå¼‚æ­¥æ‰§è¡Œï¼ˆå¦‚å‘è´§æµç¨‹ï¼Œå·²å®ç°ï¼‰
- ä¸é˜»å¡ä¸»è¦ä¸šåŠ¡æµç¨‹
- ä½¿ç”¨å®šæ—¶å™¨å¤„ç†åå°ä»»åŠ¡

### äº‘å­˜å‚¨ä¼˜åŒ–

#### 1. å›¾ç‰‡ä¼˜åŒ–
- ä¸Šä¼ å‰å‹ç¼©å›¾ç‰‡ï¼ˆå»ºè®® < 500KBï¼‰
- ç”Ÿæˆç¼©ç•¥å›¾ç”¨äºåˆ—è¡¨å±•ç¤º
- ä½¿ç”¨CDNåŠ é€Ÿï¼ˆå¾®ä¿¡äº‘å­˜å‚¨è‡ªå¸¦CDNï¼‰

#### 2. æ‰¹é‡æ“ä½œ
- æ‰¹é‡è·å–ä¸´æ—¶é“¾æ¥
- æ‰¹é‡åˆ é™¤æ–‡ä»¶

### å‰ç«¯ä¼˜åŒ–

#### 1. æ•°æ®åŠ è½½
- ä½¿ç”¨åˆ†é¡µåŠ è½½ï¼ˆæ¯é¡µ10-20æ¡ï¼‰
- ä¸‹æ‹‰åˆ·æ–° + ä¸Šæ‹‰åŠ è½½æ›´å¤š
- éª¨æ¶å±æå‡ä½“éªŒ

#### 2. å›¾ç‰‡åŠ è½½
- ä½¿ç”¨`lazy-load`æ‡’åŠ è½½
- åˆ—è¡¨ä½¿ç”¨ç¼©ç•¥å›¾
- è¯¦æƒ…é¡µä½¿ç”¨åŸå›¾

#### 3. ç¼“å­˜ç­–ç•¥
- ç¼“å­˜ç”¨æˆ·ä¿¡æ¯
- ç¼“å­˜æ´»åŠ¨åˆ—è¡¨ï¼ˆ5åˆ†é’Ÿæœ‰æ•ˆæœŸï¼‰
- ä½¿ç”¨`wx.setStorageSync`æœ¬åœ°ç¼“å­˜

## ğŸ“Š æµ‹è¯•æŠ¥å‘Šç¤ºä¾‹

### å•å…ƒæµ‹è¯•æŠ¥å‘Š
```json
{
  "suite": "all",
  "total": 12,
  "passed": 11,
  "failed": 1,
  "passRate": "91.67%",
  "errors": ["æŸä¸ªæµ‹è¯•ç”¨ä¾‹"],
  "details": [
    {
      "name": "ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½",
      "status": "PASSED",
      "message": "æµ‹è¯•é€šè¿‡"
    },
    {
      "name": "è®¢å•ä»·æ ¼è®¡ç®—",
      "status": "PASSED",
      "message": "æµ‹è¯•é€šè¿‡"
    }
  ]
}
```

### æ€§èƒ½æµ‹è¯•æŠ¥å‘Š
```json
{
  "total_tests": 8,
  "excellent": 6,
  "good": 2,
  "needs_improvement": 0,
  "overall_score": "95.00",
  "overall_grade": "A",
  "recommendations": [
    {
      "category": "database",
      "priority": "LOW",
      "message": "æ•°æ®åº“æ€§èƒ½è‰¯å¥½",
      "suggestions": ["ç»§ç»­ä¿æŒå½“å‰ä¼˜åŒ–ç­–ç•¥"]
    }
  ]
}
```

## ğŸ” è°ƒè¯•æŠ€å·§

### äº‘å‡½æ•°æ—¥å¿—
```javascript
// å¼€å‘ç¯å¢ƒå¼€å¯è¯¦ç»†æ—¥å¿—
console.log('[æ¨¡å—å] æ“ä½œæè¿°:', æ•°æ®);
console.error('[æ¨¡å—å] é”™è¯¯ä¿¡æ¯:', error);
```

### æ€§èƒ½ç›‘æ§
```javascript
// å…³é”®æ“ä½œè®°å½•è€—æ—¶
const start = Date.now();
await someOperation();
const duration = Date.now() - start;
console.log(`æ“ä½œè€—æ—¶: ${duration}ms`);
```

### é”™è¯¯è¿½è¸ª
- æ‰€æœ‰äº‘å‡½æ•°ä½¿ç”¨ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ ¼å¼
- è¿”å›æ˜ç¡®çš„é”™è¯¯ä»£ç å’Œæç¤ºä¿¡æ¯
- è®°å½•è¯¦ç»†çš„é”™è¯¯æ—¥å¿—ä¾¿äºæ’æŸ¥

## âœ… éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•

- [ ] æ‰€æœ‰å•å…ƒæµ‹è¯•é€šè¿‡ï¼ˆé€šè¿‡ç‡ > 95%ï¼‰
- [ ] æ€§èƒ½æµ‹è¯•è¯„åˆ† >= Bï¼ˆ80åˆ†ä»¥ä¸Šï¼‰
- [ ] äº‘å‡½æ•°ç¯å¢ƒå˜é‡é…ç½®æ­£ç¡®
- [ ] æ•°æ®åº“ç´¢å¼•å·²åˆ›å»º
- [ ] äº‘å­˜å‚¨CDNå·²å¯ç”¨
- [ ] å°ç¨‹åºç ç”ŸæˆåŠŸèƒ½æ­£å¸¸
- [ ] æ”¯ä»˜åŠŸèƒ½æµ‹è¯•é€šè¿‡ï¼ˆçœŸå®ç¯å¢ƒï¼‰
- [ ] å¿«é€’APIå¯¹æ¥æµ‹è¯•é€šè¿‡
- [ ] å®šæ—¶å™¨è¿è¡Œæ­£å¸¸
- [ ] é”™è¯¯æ—¥å¿—ç›‘æ§é…ç½®å®Œæˆ

## ğŸ“ æœ€ä½³å®è·µ

1. **å¼€å‘é˜¶æ®µ**ï¼šé¢‘ç¹è¿è¡Œå•å…ƒæµ‹è¯•ï¼ŒåŠæ—¶å‘ç°é—®é¢˜
2. **æµ‹è¯•é˜¶æ®µ**ï¼šå…¨é¢æµ‹è¯•æ‰€æœ‰ä¸šåŠ¡æµç¨‹ï¼Œå‹åŠ›æµ‹è¯•å…³é”®æ¥å£
3. **ä¸Šçº¿å‰**ï¼šæ€§èƒ½æµ‹è¯•è¯„åˆ†è¾¾æ ‡ï¼Œæ‰€æœ‰æ£€æŸ¥æ¸…å•å®Œæˆ
4. **ä¸Šçº¿å**ï¼šæŒç»­ç›‘æ§æ€§èƒ½æŒ‡æ ‡ï¼Œå®šæœŸä¼˜åŒ–æ…¢æŸ¥è¯¢

## ğŸ“ æµ‹è¯•è¦†ç›–ç‡

å½“å‰æµ‹è¯•è¦†ç›–ç‡ç»Ÿè®¡ï¼š
- è®¤è¯æ¨¡å—: 90%
- æ´»åŠ¨æ¨¡å—: 85%
- ç‰©å“æ¨¡å—: 85%
- è®¢å•æ¨¡å—: 90%
- æ”¯ä»˜æ¨¡å—: 70% (ä¾èµ–çœŸå®ç¯å¢ƒ)
- å‘è´§æ¨¡å—: 70% (ä¾èµ–çœŸå®ç¯å¢ƒ)
- æ™’å•æ¨¡å—: 80%
- ç»Ÿè®¡æ¨¡å—: 85%
- æ•´ä½“è¦†ç›–ç‡: 82%

ç›®æ ‡ï¼šæ‰€æœ‰æ ¸å¿ƒä¸šåŠ¡æ¨¡å—æµ‹è¯•è¦†ç›–ç‡ > 80%
