<!-- 订单支付页面 - 支持线下支付模式 -->
<view class="payment-container">
  <view class="order-info-section">
    <view class="section-title">订单信息</view>
    <view class="order-summary">
      <view class="info-row">
        <text class="label">订单编号</text>
        <text class="value">{{orderInfo.order_id}}</text>
      </view>
      <view class="info-row">
        <text class="label">商品名称</text>
        <text class="value">{{orderInfo.item_name}}</text>
      </view>
      <view class="info-row">
        <text class="label">运费</text>
        <text class="value price">¥{{orderInfo.shipping_cost}}</text>
      </view>
      <view class="info-row total">
        <text class="label">合计金额</text>
        <text class="value price">¥{{orderInfo.total_amount}}</text>
      </view>
    </view>
  </view>

  <!-- 支付方式选择 -->
  <view class="payment-method-section">
    <view class="section-title">支付方式</view>
    <view class="payment-methods">
      <!-- 微信支付（仅企业版） -->
      <view wx:if="{{enableWechatPay}}" class="method-item {{paymentMethod === 'wechat' ? 'selected' : ''}}" 
            data-method="wechat" bindtap="onSelectMethod">
        <view class="method-icon">💳</view>
        <view class="method-info">
          <text class="method-name">微信支付</text>
          <text class="method-desc">在线支付，即时到账</text>
        </view>
        <view class="method-check">{{paymentMethod === 'wechat' ? '✓' : ''}}</view>
      </view>

      <!-- 线下支付（个人版/企业版通用） -->
      <view class="method-item {{paymentMethod === 'offline' ? 'selected' : ''}}" 
            data-method="offline" bindtap="onSelectMethod">
        <view class="method-icon">📱</view>
        <view class="method-info">
          <text class="method-name">线下支付</text>
          <text class="method-desc">扫码或转账支付</text>
        </view>
        <view class="method-check">{{paymentMethod === 'offline' ? '✓' : ''}}</view>
      </view>
    </view>
  </view>

  <!-- 线下支付详情 -->
  <view wx:if="{{paymentMethod === 'offline'}}" class="offline-payment-section">
    <view class="section-title">支付说明</view>
    <view class="payment-notice">
      <text class="notice-text">请通过以下方式完成支付，支付后上传凭证等待审核</text>
    </view>

    <!-- 收款码展示 -->
    <view class="qrcode-container" wx:if="{{receiverQRCode}}">
      <image class="qrcode-image" src="{{receiverQRCode}}" mode="aspectFit" />
      <text class="qrcode-tip">请使用微信/支付宝扫码支付</text>
    </view>

    <!-- 收款账号信息 -->
    <view wx:else class="account-info">
      <view class="info-row">
        <text class="label">收款人</text>
        <text class="value">{{receiverInfo.name}}</text>
      </view>
      <view class="info-row">
        <text class="label">收款账号</text>
        <text class="value">{{receiverInfo.account}}</text>
      </view>
    </view>

    <!-- 上传支付凭证 -->
    <view class="proof-section">
      <view class="section-subtitle">支付凭证</view>
      <view class="proof-upload" bindtap="onUploadProof">
        <image wx:if="{{paymentProof}}" class="proof-image" src="{{paymentProof}}" mode="aspectFill" />
        <view wx:else class="upload-placeholder">
          <text class="upload-icon">📷</text>
          <text class="upload-text">点击上传支付凭证</text>
        </view>
      </view>
      <text class="proof-tip">请上传完整的支付截图，包含金额和时间</text>
    </view>
  </view>

  <!-- 支付按钮 -->
  <view class="payment-actions">
    <button class="cancel-btn" bindtap="onCancel">取消</button>
    <button class="pay-btn" bindtap="onConfirmPay" disabled="{{paying || !canPay}}">
      {{paying ? '处理中...' : (paymentMethod === 'wechat' ? '立即支付' : '提交审核')}}
    </button>
  </view>
</view>
