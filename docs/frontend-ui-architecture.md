# 前端UI功能架构设计

## 设计原则

**统一用户角色**：所有用户都可以发起赠送活动，也可以领取物品，无需区分主播/粉丝角色。

## 底部导航菜单（TabBar）设计

### TabBar 结构（4个Tab）

```
┌──────────┬──────────┬──────────┬──────────┐
│   首页   │  发现   │  创建    │   我的   │
│  (Home)  │ (Explore)│ (Create) │  (Profile)│
└──────────┴──────────┴──────────┴──────────┘
```

### TabBar 配置

```json
{
  "tabBar": {
    "color": "#999999",
    "selectedColor": "#07C160",
    "backgroundColor": "#FFFFFF",
    "borderStyle": "black",
    "list": [
      {
        "pagePath": "pages/index/index",
        "text": "首页",
        "iconPath": "images/home.png",
        "selectedIconPath": "images/home-active.png"
      },
      {
        "pagePath": "pages/explore/explore",
        "text": "发现",
        "iconPath": "images/explore.png",
        "selectedIconPath": "images/explore-active.png"
      },
      {
        "pagePath": "pages/create-giveaway/create-giveaway",
        "text": "创建",
        "iconPath": "images/create.png",
        "selectedIconPath": "images/create-active.png"
      },
      {
        "pagePath": "pages/profile/profile",
        "text": "我的",
        "iconPath": "images/profile.png",
        "selectedIconPath": "images/profile-active.png"
      }
    ]
  }
}
```

## 页面功能架构

### 1. 首页（index）

**功能定位**：统一入口，展示推荐内容和快捷操作

**功能模块**：
- 顶部状态栏（用户信息/登录入口）
- 搜索栏（搜索活动/用户）
- 分类导航（全部、服装、书籍、美妆、其他）
- 推荐活动列表（6-8个，根据用户行为推荐）
- 下拉刷新
- 上拉加载更多

**个性化策略**：
- **未登录**：展示热门活动
- **已登录**：展示推荐活动（基于浏览历史/兴趣）

**页面路径**：`pages/index/index`

---

### 2. 发现页（explore）- 新页面

**功能定位**：浏览所有活动，发现新内容

**功能模块**：
- 顶部筛选栏（分类、排序、筛选）
- 活动列表（瀑布流或列表）
- 活动卡片（图片、标题、运费、状态、用户信息）
- 下拉刷新
- 上拉加载更多

**筛选功能**：
- 按分类筛选
- 按状态筛选（进行中、即将开始、已结束）
- 按排序（最新、最热、运费低到高）

**页面路径**：`pages/explore/explore`（需创建）

---

### 3. 创建活动页（create-giveaway）

**功能定位**：发起赠送活动的完整流程

**流程设计**（分步骤）：

#### 步骤1：拍照上传
- 拍照或从相册选择（支持批量，最多20张）
- 图片预览和删除
- 图片压缩（自动）
- 下一步按钮

#### 步骤2：AI识别处理
- 显示处理进度
- AI识别物品类型
- 自动计算运费
- 处理完成后自动进入下一步

#### 步骤3：编辑物品信息（批量操作）
- 物品列表展示（卡片式）
- 每个物品可编辑：
  - 物品名称/标签
  - 分类（可修改AI识别的分类）
  - 数量（重要：支持填写数量）
  - 运费（可调整）
  - 描述（可选）
  - 标记名称（用于订单匹配，可选）
- 批量操作：
  - 批量设置数量
  - 批量设置分类
  - 批量设置运费
- 删除物品
- 添加更多照片

#### 步骤4：预览和发布
- 活动预览
- 设置活动标记名称（可选，用于批量标记）
- 确认发布
- 生成分享链接和二维码

**页面路径**：`pages/create-giveaway/create-giveaway`（需完善）

---

### 4. 我的页面（profile）- 新页面

**功能定位**：个人中心，管理自己的活动和订单

**功能模块**：

#### 顶部用户信息
- 头像、昵称
- 编辑资料按钮
- 统计信息（可选）：
  - 已发布活动数
  - 已领取物品数
  - 已送出物品数

#### 我的活动
- 活动列表（卡片式）
- 状态筛选（全部、进行中、草稿、已完成）
- 点击进入活动详情
- 创建新活动按钮

#### 我的订单
- 订单列表（卡片式）
- 状态筛选（全部、待支付、待发货、待收货、已完成）
- 点击进入订单详情

#### 其他功能
- 设置
- 帮助中心
- 关于我们

**页面路径**：`pages/profile/profile`（需创建）

---

### 5. 活动详情页（activity-detail）- 新页面

**功能定位**：查看活动详情，管理活动

**功能模块**：

#### 活动信息
- 活动状态（进行中、已完成、已取消）
- 创建时间
- 分享链接和二维码
- 操作按钮（编辑、取消、分享）

#### 物品列表
- 物品卡片（图片、名称、分类、运费、状态、数量）
- 已领取/剩余数量显示
- 点击物品查看详情

#### 统计信息（仅创建者可见）
- 总物品数
- 已领取数
- 待处理订单数
- 已完成订单数

#### 订单列表（仅创建者可见）
- 订单列表
- 订单状态
- 点击进入订单详情

**页面路径**：`pages/activity-detail/activity-detail`（需创建）

---

### 6. 订单详情页（order-detail）- 新页面

**功能定位**：查看订单详情，跟踪物流

**功能模块**：

#### 订单信息
- 订单号
- 订单状态
- 支付状态
- 创建时间
- 支付时间

#### 物品信息
- 物品图片
- 物品名称
- 分类
- 运费

#### 收货信息（领取者可见）
- 收货地址
- 联系人
- 联系电话

#### 物流信息
- 物流公司
- 运单号
- 物流状态
- 物流跟踪（时间线）
- 查看物流标签按钮

#### 费用明细
- 包装费
- 运费
- 平台服务费
- 总金额

#### 操作按钮
- 查看物流标签（创建者）
- 确认收货（领取者）
- 联系客服

**页面路径**：`pages/order-detail/order-detail`（需创建，现有order-status可整合）

---

### 7. 赠送活动页（giveaway）- 已存在

**功能定位**：公开的赠送活动页面，供他人浏览和领取

**功能模块**：
- 创建者信息（头像、昵称）
- 物品列表
- 领取按钮
- 分享功能

**页面路径**：`pages/giveaway/giveaway`（已存在，需优化）

---

### 8. 领取物品页（claim-item）- 已存在

**功能定位**：领取物品，填写收货信息，支付

**功能模块**：
- 物品信息展示
- 收货地址填写
- 费用明细
- 支付功能

**页面路径**：`pages/claim-item/claim-item`（已存在）

---

### 9. 我的订单列表页（my-orders）- 已存在

**功能定位**：查看所有订单

**功能模块**：
- 订单列表
- 状态筛选
- 下拉刷新
- 上拉加载更多
- 点击进入订单详情

**页面路径**：`pages/my-orders/my-orders`（已存在，需优化）

---

### 10. 分享区（sharing-area）- 已存在

**功能定位**：查看用户分享的物品照片

**页面路径**：`pages/sharing-area/sharing-area`（已存在）

---

### 11. 分享物品页（share-item）- 已存在

**功能定位**：分享收到的物品

**页面路径**：`pages/share-item/share-item`（已存在）

---

### 12. 注册/登录页（register）- 已存在

**功能定位**：用户注册和登录

**页面路径**：`pages/register/register`（已存在）

---

## 创建活动流程详细设计

### 流程步骤

```
步骤1: 拍照上传
  ↓
步骤2: AI识别处理（自动）
  ↓
步骤3: 编辑物品信息（支持批量操作）
  ├─ 编辑单个物品
  ├─ 批量设置数量
  ├─ 批量设置分类
  └─ 批量设置运费
  ↓
步骤4: 预览和发布
  ├─ 活动预览
  ├─ 设置活动标记名称
  └─ 确认发布
```

### 步骤3详细设计（编辑物品信息）

**界面布局**：
```
┌─────────────────────────────┐
│  批量操作栏                  │
│  [批量设置数量] [批量设置分类] │
└─────────────────────────────┘
┌─────────────────────────────┐
│  [图片]                      │
│  物品名称: [输入框]          │
│  分类: [下拉选择]            │
│  数量: [数字输入] ⭐重要     │
│  运费: ¥XX [可调整]          │
│  描述: [文本输入]             │
│  标记名称: [输入框]          │
│  [删除] [编辑]               │
└─────────────────────────────┘
```

**批量操作功能**：
1. **批量设置数量**：
   - 弹出对话框
   - 输入统一数量
   - 应用到所有物品或选中物品

2. **批量设置分类**：
   - 弹出选择器
   - 选择分类
   - 应用到所有物品或选中物品

3. **批量设置运费**：
   - 弹出输入框
   - 输入运费
   - 应用到所有物品或选中物品

4. **批量删除**：
   - 选择多个物品
   - 批量删除

---

## 个人中心详细设计

### 页面结构

```
┌─────────────────────────────┐
│  [头像] 昵称                 │
│  编辑资料                    │
│  ────────────────────────   │
│  统计信息（可选）            │
│  [活动数] [订单数] [物品数]  │
├─────────────────────────────┤
│  我的活动                    │
│  [活动卡片1]                 │
│  [活动卡片2]                 │
│  [查看全部] →                │
├─────────────────────────────┤
│  我的订单                    │
│  [订单卡片1]                 │
│  [订单卡片2]                 │
│  [查看全部] →                │
├─────────────────────────────┤
│  其他功能                    │
│  [设置] [帮助] [关于]        │
└─────────────────────────────┘
```

### 我的活动功能

**活动列表**：
- 活动卡片显示：
  - 活动状态（进行中、已完成、草稿）
  - 物品数量
  - 已领取数量
  - 创建时间
  - 分享链接（可复制）

**操作**：
- 点击进入活动详情
- 长按显示操作菜单（编辑、删除、分享）

**筛选**：
- 全部、进行中、草稿、已完成

### 我的订单功能

**订单列表**：
- 订单卡片显示：
  - 物品图片和名称
  - 订单状态
  - 支付状态
  - 订单金额
  - 创建时间

**操作**：
- 点击进入订单详情
- 根据状态显示操作按钮

**筛选**：
- 全部、待支付、待发货、待收货、已完成

---

## 页面路由关系图

```
首页 (index)
  ├─→ 活动详情 (activity-detail)
  │     ├─→ 订单详情 (order-detail)
  │     └─→ 领取物品 (claim-item)
  │           └─→ 支付 (payment)
  │                 └─→ 订单状态 (order-status)
  │                       └─→ 订单详情 (order-detail)
  └─→ 赠送活动 (giveaway)
        └─→ 领取物品 (claim-item)

发现 (explore)
  └─→ 活动详情 (activity-detail)

创建 (create-giveaway)
  └─→ 活动详情 (activity-detail)

我的 (profile)
  ├─→ 我的活动列表 (my-activities)
  │     └─→ 活动详情 (activity-detail)
  ├─→ 我的订单列表 (my-orders)
  │     └─→ 订单详情 (order-detail)
  └─→ 设置 (settings)

分享区 (sharing-area)
  └─→ 分享物品 (share-item)
```

---

## 需要创建的页面

1. **发现页**：`pages/explore/explore`
2. **个人中心**：`pages/profile/profile`
3. **活动详情**：`pages/activity-detail/activity-detail`
4. **订单详情**：`pages/order-detail/order-detail`（或整合到order-status）

## 需要完善的页面

1. **创建活动页**：完善批量操作功能，添加数量填写
2. **首页**：按新设计实现
3. **我的订单页**：优化，添加订单详情入口
4. **我的活动页**：优化，添加活动详情入口

---

## 底部导航菜单图标需求

需要准备以下图标（建议尺寸：81x81px）：
- `images/home.png` / `images/home-active.png`
- `images/explore.png` / `images/explore-active.png`
- `images/create.png` / `images/create-active.png`
- `images/profile.png` / `images/profile-active.png`

---

## 下一步开发建议

### 阶段1：基础架构（优先级：高）
1. 配置TabBar
2. 创建发现页（explore）
3. 创建个人中心（profile）
4. 完善首页（index）

### 阶段2：核心功能（优先级：高）
1. 创建活动详情页（activity-detail）
2. 创建订单详情页（order-detail）
3. 完善创建活动流程（批量操作、数量填写）

### 阶段3：优化完善（优先级：中）
1. 优化现有页面
2. 添加筛选和搜索功能
3. 完善交互体验

### 阶段4：细节优化（优先级：低）
1. 性能优化
2. 动画效果
3. 错误处理优化

